import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { CheckCircle, Copy, ExternalLink, X, Package, Check, AlertCircle } from 'lucide-react';
import Button from './Button';
const SuccessModal = ({ isOpen, onClose, trackingCode, trackingLink, customerName, onViewOrders, emailSent = false, emailError = null, }) => {
    const [copied, setCopied] = useState(false);
    const copyToClipboard = async () => {
        try {
            await navigator.clipboard.writeText(trackingLink);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
        }
        catch (err) {
            console.error('Erro ao copiar link:', err);
        }
    };
    const openTrackingPage = () => {
        window.open(trackingLink, '_blank');
    };
    return (_jsx(AnimatePresence, { children: isOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4", children: [_jsx(motion.div, { className: "absolute inset-0 bg-black bg-opacity-50", initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, onClick: onClose }), _jsxs(motion.div, { className: "relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden", initial: { opacity: 0, scale: 0.9, y: 20 }, animate: { opacity: 1, scale: 1, y: 0 }, exit: { opacity: 0, scale: 0.9, y: 20 }, transition: { type: "spring", stiffness: 300, damping: 30 }, children: [_jsxs("div", { className: "bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white relative", children: [_jsx("button", { onClick: onClose, className: "absolute top-4 right-4 text-white/80 hover:text-white transition-colors", children: _jsx(X, { className: "w-5 h-5" }) }), _jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "bg-white/20 p-2 rounded-full", children: _jsx(CheckCircle, { className: "w-6 h-6" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-xl font-bold", children: "Pedido Criado!" }), _jsxs("p", { className: "text-green-100 text-sm", children: ["Pedido para ", customerName, " foi criado com sucesso"] })] })] })] }), _jsxs("div", { className: "p-6 space-y-6", children: [_jsxs("div", { className: "text-center", children: [_jsxs("div", { className: "flex items-center justify-center space-x-2 mb-2", children: [_jsx(Package, { className: "w-5 h-5 text-gray-600" }), _jsx("span", { className: "text-sm font-medium text-gray-600", children: "C\u00F3digo de Rastreio" })] }), _jsx("div", { className: "bg-gray-100 rounded-lg p-4", children: _jsx("span", { className: "text-2xl font-mono font-bold text-gray-800 tracking-wider", children: trackingCode }) })] }), _jsxs("div", { className: `p-3 rounded-lg ${emailSent
                                        ? 'bg-green-50 border border-green-200'
                                        : 'bg-red-50 border border-red-200'}`, children: [_jsxs("div", { className: "flex items-center justify-center mb-1", children: [emailSent ? (_jsx(Check, { className: "w-4 h-4 text-green-600 mr-2" })) : (_jsx(AlertCircle, { className: "w-4 h-4 text-red-600 mr-2" })), _jsx("span", { className: `text-sm font-medium ${emailSent ? 'text-green-800' : 'text-red-800'}`, children: emailSent ? 'Email Enviado' : 'Erro no Email' })] }), emailError && (_jsx("p", { className: "text-xs text-red-600 text-center", children: emailError }))] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Link de Rastreamento" }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: "flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3", children: _jsx("span", { className: "text-sm text-gray-600 break-all", children: trackingLink }) }), _jsx(Button, { variant: "outline", size: "sm", onClick: copyToClipboard, className: "flex-shrink-0", children: copied ? (_jsx(CheckCircle, { className: "w-4 h-4 text-green-600" })) : (_jsx(Copy, { className: "w-4 h-4" })) })] }), copied && (_jsx(motion.p, { className: "text-sm text-green-600 mt-1", initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0 }, children: "Link copiado para a \u00E1rea de transfer\u00EAncia!" }))] }), _jsxs("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-4", children: [_jsx("h3", { className: "text-sm font-medium text-blue-800 mb-2", children: "Pr\u00F3ximos Passos" }), _jsxs("ul", { className: "text-sm text-blue-700 space-y-1", children: [_jsx("li", { children: "\u2022 Envie o link de rastreamento para o cliente" }), _jsx("li", { children: "\u2022 O cliente poder\u00E1 acompanhar o pedido em tempo real" }), _jsx("li", { children: "\u2022 O pedido aparecer\u00E1 na sua lista de pedidos" })] })] })] }), _jsxs("div", { className: "bg-gray-50 px-6 py-4 flex flex-col sm:flex-row gap-3", children: [_jsx(Button, { variant: "outline", onClick: openTrackingPage, leftIcon: _jsx(ExternalLink, { className: "w-4 h-4" }), className: "flex-1", children: "Ver Rastreamento" }), _jsx(Button, { variant: "primary", onClick: onViewOrders, className: "flex-1", children: "Ver Lista de Pedidos" })] })] })] })) }));
};
export default SuccessModal;
